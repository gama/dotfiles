set-window-option -g utf8 on
set-window-option -g mode-keys vi
set-option -sg assume-paste-time 0
set-option -g escape-time 0
set-option -g update-environment -r

# replace the default C-b prefix with C-a
unbind-key C-b
set-option -g prefix C-a
bind-key C-a send-prefix

bind-key -n  S-Enter send-key Enter
bind-key -n  C-h     run "((tmux display-message -p '#{pane_title}' | egrep -q '[VIM].*←' && tmux send-keys C-h) || (tmux select-pane -L > /dev/null 2>&1)); exit 0"
bind-key -n  C-j     run "((tmux display-message -p '#{pane_title}' | egrep -q '[VIM].*↓' && tmux send-keys C-j) || (tmux select-pane -D > /dev/null 2>&1)); exit 0"
bind-key -n  C-k     run "((tmux display-message -p '#{pane_title}' | egrep -q '[VIM].*↑' && tmux send-keys C-k) || (tmux select-pane -U > /dev/null 2>&1)); exit 0"
bind-key -n  C-l     run "((tmux display-message -p '#{pane_title}' | egrep -q '[VIM].*→' && tmux send-keys C-l) || (tmux select-pane -R > /dev/null 2>&1)); exit 0"
# bind-key -nr M-Up    resize-pane -U
# bind-key -nr M-Down  resize-pane -D
# bind-key -nr M-Left  resize-pane -L
# bind-key -nr M-Right resize-pane -R
bind-key -nr M-Up    resize-pane -U
bind-key -nr M-Down  resize-pane -D
bind-key -nr M-Left  resize-pane -L
bind-key -nr M-Right resize-pane -R

bind-key    j  send-prefix \; send-key j
bind-key    k  send-prefix \; send-key k
bind-key    l  send-prefix \; send-key l
bind-key    h  send-prefix \; send-key h
bind-key    y  send-prefix \; send-key y
bind-key    n  send-prefix \; send-key n
bind-key    p  send-prefix \; send-key p
bind-key    o  send-prefix \; send-key o
bind-key    J  send-prefix \; send-key J
bind-key    K  send-prefix \; send-key K
bind-key    /  send-prefix \; send-key /

bind-key    :       command-prompt
bind-key    r       new-window -c '#{pane_current_path}'
bind-key    \       split-window -h -c '#{pane_current_path}'
bind-key    -       split-window -v -c '#{pane_current_path}'
bind-key    =       select-layout even-horizontal
# bind-key -n  ±   select-layout even-vertical
bind-key    H       previous-window
bind-key    L       next-window
bind-key    {       previous-window
bind-key    }       next-window
bind-key    1       select-window -t :1
bind-key    2       select-window -t :2
bind-key    3       select-window -t :3
bind-key    4       select-window -t :4
bind-key    5       select-window -t :5
bind-key    6       select-window -t :6
bind-key    7       select-window -t :7
bind-key    8       select-window -t :8
bind-key    9       select-window -t :9
bind-key    0       select-window -l
bind-key -r Up      resize-pane -U
bind-key -r Down    resize-pane -D
bind-key -r Left    resize-pane -L
bind-key -r Right   resize-pane -R
bind-key    PPage   copy-mode -u -e
bind-key    u       copy-mode -e
bind-key    i       paste-buffer
bind-key    S-Enter send-key Enter

bind-key -n  M-d     display-message "${USER}@${HOST}:${PWD}   -   %b %d %Y, %H:%M"

bind-key -r -t vi-copy K       page-up
bind-key -r -t vi-copy J       page-down
bind-key -r -t vi-copy M-k     scroll-up
bind-key -r -t vi-copy M-j     scroll-down
bind-key -r -t vi-copy v       begin-selection
bind-key -r -t vi-copy y       copy-selection
bind-key -r -t vi-copy V       rectangle-toggle

set-option -g prefix C-a
set-option -g history-limit 100000
set-option -g xterm-keys on
set-option -g terminal-overrides "*88col*:colors=88,*256col*:colors=256,xterm*:XT"
set-option -g default-terminal "screen-256color"
set-option -g base-index 1
set-option -g status on
set-option -g status-left ''
set-option -g status-right ''
set-option -g window-status-format '#I:#T '
set-option -g window-status-current-format '#I:#T '
set-option -g message-bg colour233
set-option -g message-fg colour254
set-option -g visual-activity on
set-option -g set-titles on
set-option -g set-titles-string '#T'
set-option -g display-time 2000

set-window-option -g monitor-activity off
set-window-option -g automatic-rename
# set-option -g mouse on
# set-window-option -g mode-bg colour230
# set-window-option -g mode-mouse on
# set-window-option -g mouse-select-pane on
# set-window-option -g mouse-select-window on

# set-option -g window-style 'fg=#4f4f4f,bg=#efefef'
# set-option -g window-active-style 'fg=#4f4f4f,bg=#f7f7f7'
set-option -g window-style 'bg=#efefef'
set-option -g window-active-style 'bg=#f7f7f7'
set-option -g pane-border-style 'fg=#efefef,bg=#efefef'
set-option -g pane-active-border-style 'fg=#f7f7f7,bg=#f7f7f7'
set-option -g status-style 'fg=#4f4f4f,bg=#dfdfdf'
set-option -g window-status-style 'fg=#4f4f4f,bg=#dfdfdf'
set-option -g window-status-current-style 'fg=#0000a0,bg=#dfdfdf'

# fix ssh agent when tmux is detached
# setenv -g SSH_AUTH_SOCK $HOME/.ssh/auth_sock
